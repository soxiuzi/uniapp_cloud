{"version":3,"sources":["webpack:///D:/project/uniapp/myUniapp/main.js","webpack:///D:/project/uniapp/myUniapp/pages/subpages/account/login.vue?c0ed","webpack:///D:/project/uniapp/myUniapp/pages/subpages/account/login.vue?af58","webpack:///D:/project/uniapp/myUniapp/pages/subpages/account/login.vue?e072","webpack:///D:/project/uniapp/myUniapp/pages/subpages/account/login.vue?fd13","webpack:///D:/project/uniapp/myUniapp/pages/subpages/account/login.vue"],"names":["createPage","Page","data","hasProvider","providerList","account","password","onReady","getProvider","methods","getUserInfo","res","detail","iv","uni","showToast","icon","title","setTimeout","profile","JSON","parse","rawData","nickname","nickName","temp","token","storeLogin","switchTab","url","service","success","provider","length","i","tempProvider","indexOf","push","value","image","fail","err","console","log","stringify","bindLogin","trim","alert","test","showLoading","params","phone","apiLogin","then","code","msg","bindings","tokenJsonStr","access_token","authLogin","login","infoRes","userInfo"],"mappings":"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","file":"pages/subpages/account/login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/subpages/account/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=07bd561f&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/uniapp/myUniapp/pages/subpages/account/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=07bd561f&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\thasProvider: false,\n\t\t\tproviderList: [],\n\t\t\taccount: '',\n\t\t\tpassword: ''\n\t\t};\n\t},\n\tonReady() {\n\t\tthis.getProvider()\n\n\n\n\n\n\t},\n\tmethods: {\n\t\t...mapMutations(['storeLogin']),\n\t\t// 微信授权\n\t\tgetUserInfo(res) {\n\t\t\tif (!res.detail.iv) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon:'none',\n\t\t\t\t\ttitle: \"您取消了授权，登录失败\"\n\t\t\t\t});\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t// 用户授权\n\t\t\tsetTimeout(() => {\n\t\t\t\tlet profile = JSON.parse(res.detail.rawData)\n\t\t\t\tprofile.nickname = profile.nickName\n\t\t\t\t\n\t\t\t\tconst temp = {\n\t\t\t\t\ttoken: '',\n\t\t\t\t\tprofile,\n\t\t\t\t}\n\t\t\t\tthis.storeLogin(temp)\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t})\n\t\t\t}, 100)\n\t\t},\n\t\t// 获取服务供应商\n\t\tgetProvider() {\n\t\t\tconst providerList = ['weixin', 'qq', 'sinaweibo']\n\t\t\t// 判断是否用某种登录工具登录\n\t\t\tuni.getProvider({\n\t\t\t\tservice: 'oauth',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.provider && res.provider.length) {\n\t\t\t\t\t\tfor (let i = 0; i < res.provider.length; i++) {\n\t\t\t\t\t\t\tvar tempProvider = res.provider[i]\n\t\t\t\t\t\t\tif (~providerList.indexOf(tempProvider)) {\n\t\t\t\t\t\t\t\tthis.providerList.push({\n\t\t\t\t\t\t\t\t\tvalue: tempProvider,\n\t\t\t\t\t\t\t\t\timage: '/static/image/login/' + tempProvider + '.png'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.hasProvider = true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log('获取服务供应商失败：' + JSON.stringify(err))\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 账号登录\n\t\tbindLogin() {\n\t\t\tconst account = this.account.trim()\n\t\t\tconst password = this.password.trim()\n\t\t\tif (!account.length) {\n\t\t\t\tthis.alert('请输入手机号')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (!(/^1[3456789]\\d{9}$/.test(account))) {\n\t\t\t\tthis.alert('手机号码有误，请重填')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (password.length < 6) {\n\t\t\t\tthis.alert('密码最短为6个字符')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '登陆中'\n\t\t\t})\n\t\t\t\n\t\t\tconst params = {\n\t\t\t\tphone: this.account,\n\t\t\t\tpassword: this.password\n\t\t\t}\n\t\t\tapiLogin(params).then(res => {\n\t\t\t\tif (res.code !== 200) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\ttitle: res.msg\n\t\t\t\t\t})\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst temp = {\n\t\t\t\t\ttoken: JSON.parse(res.bindings[1].tokenJsonStr).access_token,\n\t\t\t\t\tprofile: res.profile\n\t\t\t\t}\n\t\t\t\tthis.storeLogin(temp)\n\t\t\t\t\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 第三方授权登录\n\t\tauthLogin(value) {\n\t\t\tuni.login({\n\t\t\t\tprovider: value,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\tprovider: value,\n\t\t\t\t\t\tsuccess: infoRes => {\n\t\t\t\t\t\t\tlet profile = {}\n\t\t\t\t\t\t\tinfoRes.userInfo.nickname = infoRes.userInfo.nickName\n\t\t\t\t\t\t\tprofile = infoRes.userInfo\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst temp = {\n\t\t\t\t\t\t\t\ttoken: '',\n\t\t\t\t\t\t\t\tprofile\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.storeLogin(temp)\n\t\t\t\t\t\t\t// 登录完之后到首页\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log('授权失败：' + JSON.stringify(err))\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 验证报错\n\t\talert(msg) {\n\t\t\tuni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: msg\n\t\t\t})\n\t\t}\n\t}\n}\n"],"sourceRoot":""}